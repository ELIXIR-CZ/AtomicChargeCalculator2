{% extends 'base/base.html' %}

{% block title %} Atomic Charge Calculator II â€“ Calculation results {% endblock title %}

{% block styles %}
    <link rel="stylesheet" href="{{ url_for('static', filename='select2/select2.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='litemol/static/css/main.css') }}">
    <link rel="preload" href="{{ url_for('static', filename='litemol/static/media/fontello.woff2') }}?version=r6.6"
          as="font" type="font/woff2" crossorigin>
{% endblock styles %}

{% block body %}
<div class="container mt-5 p-3">
    <div class="row">
        <div class="col">
            <h1 style="margin-bottom: 30px" class="font-weight-bold">Atomic Charge Calculator <span style="color: #28a745">II</span></h1>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <h2>Computation results</h2>
        </div>
    </div>
    <div class="row">
        <div class="col">Method: {{ method_name }} </div>
    </div>
    <div class="row">
        <div class="col">Parameters: {{ parameters_name }} </div>
    </div>
    <hr>
    <div class="row">
        <div class="col-12 col-md-6">
            <label for="structure_select">Structure:</label>
            <select id="structure_select" name="structure_select" style="width:50%">
                {% for k in structures %}
                    <option value="{{ k }}">{{ k.split(':')[1].strip() }}</option>
                {% endfor %}
            </select>
        </div>
            <div class="col-12 col-md-6">
            View:
            <label title="Cartoon representation" ><input type="radio" name="view" value="Cartoon" checked>Cartoon</label>
            <label title="Balls and sticks representation"><input type="radio" name="view" value="Balls and sticks" >Balls and sticks</label>
            <label title="Surface representation"><input type="radio" name="view" value="Surface" >Surface</label>
            <br>
            Coloring:
            <label title="Use coloring based on the largest absolute charge value" ><input type="radio" name="colors" value="Relative" checked>Charges (relative)</label>
            <label title="Use coloring based on the specified values below"><input type="radio" name="colors" value="Absolute" >Charges (absolute)</label>
            <label title="Use coloring based on the structure"><input type="radio" name="colors" value="Structure" >Structure</label>
            <br>
            <label for="min_value">Min value:</label>
            <input type="number" id="min_value" name="min_value" min="-5" max="5" step="0.1" value="-1">
            <label for="max_value">Max value:</label>
            <input type="number" id="max_value" name="max_value" min="-5" max="5" step="0.1" value="1">
        </div>

    </div>
    <hr>

    {% include 'base/flash.html' %}

    <div class="row">
        <div class="col">
            <div id="root" style="height: 750px"></div>
        </div>
    </div>
    <hr>

    <div class="row">
        <div class="col-12 col-md-6 pb-3">
            <a href="{{ url_for('download_charges', r=comp_id) }}" class="btn btn-success" id="download">Download charges</a>
            {% if logs %}
                <a href="{{ url_for('get_logs', r=comp_id) }}" class="btn btn-warning" download="log.txt">Download logs</a>
            {% endif %}
        </div>
        <div class="col-12 col-md-6 text-md-right pb-3">
            <a href="{{ url_for('setup', r=comp_id) }}" class="btn btn-secondary">Back to setup</a>
            <a href="{{ url_for('main_site') }}" class="btn btn-primary">Back to main page</a>
        </div>
    </div>

    <hr>
    {% include 'base/footer.html' %}
</div>
{% endblock body %}


{% block scripts %}
<script src="{{ url_for('static', filename='jquery/jquery-3.4.1.min.js') }}"></script>
<script src="{{ url_for('static', filename='bootstrap/bootstrap.min.js') }}"></script>
<script src="{{ url_for('static', filename='select2/select2.min.js') }}"></script>
<script src="{{ url_for('static', filename='litemol/LiteMol-plugin.min.js') }}"></script>
<script src="{{ url_for('static', filename='litemol/static/js/main.js') }}"></script>
<script src="{{ url_for('static', filename='main.js') }}"></script>

<script>
    const get_structure_url = '{{ url_for("get_structure", r=comp_id) }}';
    const get_charges_url = '{{ url_for("get_charges", r=comp_id) }}';
    const get_format_url = '{{ url_for("get_format", r=comp_id) }}';
    const chg_range = JSON.parse('{{ chg_range | tojson | safe }}');
</script>
{% endblock scripts %}